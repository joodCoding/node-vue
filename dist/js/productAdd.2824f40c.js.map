{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.push.js","webpack:///./node_modules/core-js/modules/web.url-search-params.has.js","webpack:///./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js/internals/array-set-length.js","webpack:///./src/views/shop/ProductAdd.vue","webpack:///./src/views/shop/ProductAdd.vue?5220","webpack:///./src/views/shop/ProductAdd.vue?7eb4","webpack:///./node_modules/core-js/modules/web.url-search-params.size.js","webpack:///./node_modules/core-js/modules/web.url-search-params.delete.js","webpack:///./src/views/shop/ProductAdd.vue?a071","webpack:///./node_modules/core-js/internals/validate-arguments-length.js","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","getAll","$has","has","params","undefined","name","$value","values","value","index","enumerable","unsafe","$TypeError","MAX_SAFE_INTEGER","module","exports","it","DESCRIPTORS","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","router","useRouter","id","useRoute","productForm","ref","productId","price","oldPrice","tabs","img","rawImgFile","customTabs","productRules","required","message","trigger","type","onMounted","async","result","get","errno","data","console","log","path","ElMessage","handleProductImgChange","file","URL","createObjectURL","raw","beforeProductImgUpload","isImage","startsWith","handleProductSubmit","response","post","success","goBack","back","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","class","_createElementVNode","_hoisted_2","_component_el_button","onClick","_cache","_component_el_form","model","rules","onSubmit","_withModifiers","_component_el_form_item","label","prop","_component_el_input","$event","placeholder","_component_el_input_number","min","precision","controls-position","_component_el_checkbox_group","_Fragment","_renderList","tab","_createBlock","_component_el_checkbox","key","_component_el_upload","on-change","before-upload","show-file-list","auto-upload","src","_component_el_icon","_unref","Plus","native-type","__exports__","defineBuiltInAccessor","forEach","count","configurable","append","$delete","entries","v","k","entry","dindex","found","entriesLength","passed","classof","Array","argument"],"mappings":"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","file":"js/productAdd.2824f40c.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","<template>\r\n  <div class=\"shop-management-container\">\r\n    <el-card class=\"box-card\">\r\n      <div class=\"card-header\">\r\n        <span>新增产品</span>\r\n        <el-button @click=\"goBack\">返回</el-button>\r\n      </div>\r\n\r\n      <el-form\r\n        ref=\"productFormRef\"\r\n        :model=\"productForm\"\r\n        :rules=\"productRules\"\r\n        @submit.prevent=\"handleProductSubmit\"\r\n        class=\"product-form\"\r\n      >\r\n        <el-form-item label=\"产品名称\" prop=\"name\">\r\n          <el-input v-model=\"productForm.name\" placeholder=\"请输入产品名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input-number\r\n            v-model=\"productForm.price\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"原价\" prop=\"oldPrice\">\r\n          <el-input-number\r\n            v-model=\"productForm.oldPrice\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"产品标签\" prop=\"tabs\">\r\n          <el-checkbox-group v-model=\"productForm.tabs\">\r\n            <el-checkbox v-for=\"tab in customTabs\" :key=\"tab.name\" :label=\"tab.tab\">{{\r\n              tab.name\r\n            }}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"产品图片\" prop=\"img\">\r\n          <el-upload\r\n            :on-change=\"handleProductImgChange\"\r\n            :before-upload=\"beforeProductImgUpload\"\r\n            :show-file-list=\"false\"\r\n            :auto-upload=\"false\"\r\n            class=\"avatar-uploader\"\r\n          >\r\n            <img\r\n              v-if=\"productForm.img && typeof productForm.img === 'string'\"\r\n              :src=\"productForm.img\"\r\n              class=\"avatar\"\r\n            />\r\n            <img\r\n              v-if=\"productForm.rawImgFile && typeof productForm.rawImgFile === 'string'\"\r\n              :src=\"productForm.rawImgFile\"\r\n              class=\"avatar\"\r\n            />\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n          </el-upload>\r\n          <div class=\"el-upload__tip\">只能上传图片文件，建议尺寸1:1</div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" native-type=\"submit\" class=\"submit-button\"\r\n            >保存产品修改</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { get, post } from \"@/utils/request\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Plus } from \"@element-plus/icons-vue\";\r\n\r\nconst router = useRouter();\r\n\r\nconst id = useRoute().params.id; // 获取路由参数中的店铺ID\r\n\r\n// 新增产品表单数据\r\nconst productForm = ref({\r\n  productId: \"\",\r\n  name: \"\",\r\n  price: 0,\r\n  oldPrice: 0, // 默认为null，后端会处理默认值\r\n  tabs: [], // 使用数组存储选中的标签\r\n  img: null, // 存储文件对象\r\n  rawImgFile: \"\",\r\n});\r\n\r\n// 自定义标签数组\r\nconst customTabs = ref([]); // 初始为空数组，只显示默认标签\r\n\r\n// 产品表单验证规则\r\nconst productRules = {\r\n  name: [{ required: true, message: \"请输入产品名称\", trigger: \"blur\" }],\r\n  price: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\r\n  oldPrice: [{ required: true, message: \"请输入原价\", trigger: \"blur\" }],\r\n  tabs: [\r\n    {\r\n      type: \"array\",\r\n      required: true,\r\n      message: \"请选择产品标签\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  img: [{ required: true, message: \"请上传产品图片\", trigger: \"change\" }],\r\n};\r\n\r\n// 加载店铺现有数据（获取店铺ID）\r\nonMounted(async () => {\r\n  try {\r\n    const result = await get(`api/shop/${id}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      customTabs.value = result.data.tabs;\r\n      if (customTabs.value.length === 0) {\r\n        console.log(\"test\");\r\n        router.push({ path: `/shop/tag/manager/${id}` });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n});\r\n\r\n// 产品图片处理\r\nconst handleProductImgChange = (file) => {\r\n  productForm.value.img = file;\r\n  productForm.value.rawImgFile = URL.createObjectURL(file.raw);\r\n};\r\n\r\nconst beforeProductImgUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\n// 新增产品表单提交\r\nconst handleProductSubmit = async () => {\r\n  try {\r\n    console.log(productForm.value);\r\n    const response = await post(`/api/shop/${id}/product`, productForm.value, true);\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品信息更新成功\");\r\n      // 清空表单\r\n\r\n      productForm.value = {\r\n        productId: \"\",\r\n        name: \"\",\r\n        price: 0,\r\n        oldPrice: null,\r\n        tabs: [],\r\n        img: null,\r\n        rawImgFile: \"\",\r\n      };\r\n    } else {\r\n      ElMessage.error(\"产品创建失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"产品更新失败\");\r\n  }\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shop-management-container {\r\n  padding: 20px;\r\n  background-color: #f0f2f5;\r\n  min-height: calc(100vh - 40px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  border-radius: 10px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header .el-button {\r\n  margin-left: 20px;\r\n}\r\n\r\n.product-form .el-form-item {\r\n  margin-bottom: 22px; /* 增加表单项间距 */\r\n}\r\n\r\n.submit-button {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .shop-management-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .box-card {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .card-header {\r\n    font-size: 18px;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .product-form .el-form-item {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  .el-form-item__label {\r\n    width: 90px !important; /* 调整label宽度 */\r\n  }\r\n\r\n  .el-form-item__content {\r\n    margin-left: 90px !important; /* 调整内容左边距 */\r\n  }\r\n\r\n  .avatar-uploader .avatar,\r\n  .el-icon.avatar-uploader-icon {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"shop-management-container\">\r\n    <el-card class=\"box-card\">\r\n      <div class=\"card-header\">\r\n        <span>新增产品</span>\r\n        <el-button @click=\"goBack\">返回</el-button>\r\n      </div>\r\n\r\n      <el-form\r\n        ref=\"productFormRef\"\r\n        :model=\"productForm\"\r\n        :rules=\"productRules\"\r\n        @submit.prevent=\"handleProductSubmit\"\r\n        class=\"product-form\"\r\n      >\r\n        <el-form-item label=\"产品名称\" prop=\"name\">\r\n          <el-input v-model=\"productForm.name\" placeholder=\"请输入产品名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input-number\r\n            v-model=\"productForm.price\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"原价\" prop=\"oldPrice\">\r\n          <el-input-number\r\n            v-model=\"productForm.oldPrice\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"产品标签\" prop=\"tabs\">\r\n          <el-checkbox-group v-model=\"productForm.tabs\">\r\n            <el-checkbox v-for=\"tab in customTabs\" :key=\"tab.name\" :label=\"tab.tab\">{{\r\n              tab.name\r\n            }}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"产品图片\" prop=\"img\">\r\n          <el-upload\r\n            :on-change=\"handleProductImgChange\"\r\n            :before-upload=\"beforeProductImgUpload\"\r\n            :show-file-list=\"false\"\r\n            :auto-upload=\"false\"\r\n            class=\"avatar-uploader\"\r\n          >\r\n            <img\r\n              v-if=\"productForm.img && typeof productForm.img === 'string'\"\r\n              :src=\"productForm.img\"\r\n              class=\"avatar\"\r\n            />\r\n            <img\r\n              v-if=\"productForm.rawImgFile && typeof productForm.rawImgFile === 'string'\"\r\n              :src=\"productForm.rawImgFile\"\r\n              class=\"avatar\"\r\n            />\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n          </el-upload>\r\n          <div class=\"el-upload__tip\">只能上传图片文件，建议尺寸1:1</div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" native-type=\"submit\" class=\"submit-button\"\r\n            >保存产品修改</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { get, post } from \"@/utils/request\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { Plus } from \"@element-plus/icons-vue\";\r\n\r\nconst router = useRouter();\r\n\r\nconst id = useRoute().params.id; // 获取路由参数中的店铺ID\r\n\r\n// 新增产品表单数据\r\nconst productForm = ref({\r\n  productId: \"\",\r\n  name: \"\",\r\n  price: 0,\r\n  oldPrice: 0, // 默认为null，后端会处理默认值\r\n  tabs: [], // 使用数组存储选中的标签\r\n  img: null, // 存储文件对象\r\n  rawImgFile: \"\",\r\n});\r\n\r\n// 自定义标签数组\r\nconst customTabs = ref([]); // 初始为空数组，只显示默认标签\r\n\r\n// 产品表单验证规则\r\nconst productRules = {\r\n  name: [{ required: true, message: \"请输入产品名称\", trigger: \"blur\" }],\r\n  price: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\r\n  oldPrice: [{ required: true, message: \"请输入原价\", trigger: \"blur\" }],\r\n  tabs: [\r\n    {\r\n      type: \"array\",\r\n      required: true,\r\n      message: \"请选择产品标签\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  img: [{ required: true, message: \"请上传产品图片\", trigger: \"change\" }],\r\n};\r\n\r\n// 加载店铺现有数据（获取店铺ID）\r\nonMounted(async () => {\r\n  try {\r\n    const result = await get(`api/shop/${id}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      customTabs.value = result.data.tabs;\r\n      if (customTabs.value.length === 0) {\r\n        console.log(\"test\");\r\n        router.push({ path: `/shop/tag/manager/${id}` });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n});\r\n\r\n// 产品图片处理\r\nconst handleProductImgChange = (file) => {\r\n  productForm.value.img = file;\r\n  productForm.value.rawImgFile = URL.createObjectURL(file.raw);\r\n};\r\n\r\nconst beforeProductImgUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\n// 新增产品表单提交\r\nconst handleProductSubmit = async () => {\r\n  try {\r\n    console.log(productForm.value);\r\n    const response = await post(`/api/shop/${id}/product`, productForm.value, true);\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品信息更新成功\");\r\n      // 清空表单\r\n\r\n      productForm.value = {\r\n        productId: \"\",\r\n        name: \"\",\r\n        price: 0,\r\n        oldPrice: null,\r\n        tabs: [],\r\n        img: null,\r\n        rawImgFile: \"\",\r\n      };\r\n    } else {\r\n      ElMessage.error(\"产品创建失败\");\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"产品更新失败\");\r\n  }\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shop-management-container {\r\n  padding: 20px;\r\n  background-color: #f0f2f5;\r\n  min-height: calc(100vh - 40px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  border-radius: 10px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header .el-button {\r\n  margin-left: 20px;\r\n}\r\n\r\n.product-form .el-form-item {\r\n  margin-bottom: 22px; /* 增加表单项间距 */\r\n}\r\n\r\n.submit-button {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .shop-management-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .box-card {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .card-header {\r\n    font-size: 18px;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .product-form .el-form-item {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  .el-form-item__label {\r\n    width: 90px !important; /* 调整label宽度 */\r\n  }\r\n\r\n  .el-form-item__content {\r\n    margin-left: 90px !important; /* 调整内容左边距 */\r\n  }\r\n\r\n  .avatar-uploader .avatar,\r\n  .el-icon.avatar-uploader-icon {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./ProductAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductAdd.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProductAdd.vue?vue&type=style&index=0&id=fdf1b478&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\连泽基\\\\毕业设计\\\\仿京东电商全栈代码\\\\项目\\\\前端代码\\\\dianshang-fe-by-Dell\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fdf1b478\"]])\n\nexport default __exports__","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ProductAdd.vue?vue&type=style&index=0&id=fdf1b478&scoped=true&lang=css\"","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n"],"sourceRoot":""}