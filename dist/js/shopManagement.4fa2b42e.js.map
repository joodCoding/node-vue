{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.push.js","webpack:///./node_modules/core-js/modules/web.url-search-params.has.js","webpack:///./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js/internals/array-set-length.js","webpack:///./src/views/shop/ShopManagement.vue","webpack:///./src/views/shop/ShopManagement.vue?3fb1","webpack:///./src/views/shop/ShopManagement.vue?587a","webpack:///./src/views/shop/ShopManagement.vue?3b59","webpack:///./node_modules/core-js/modules/web.url-search-params.size.js","webpack:///./node_modules/core-js/modules/web.url-search-params.delete.js","webpack:///./node_modules/core-js/internals/validate-arguments-length.js","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","getAll","$has","has","params","undefined","name","$value","values","value","index","enumerable","unsafe","$TypeError","MAX_SAFE_INTEGER","module","exports","it","DESCRIPTORS","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","router","useRouter","id","ref","form","slogan","expressPrice","expressLimit","state","img","rules","required","message","trigger","onMounted","async","userStore","useUserStore","result","get","user","username","errno","data","imgUrl","rawImgFile","ElMessage","handleLogoChange","file","URL","createObjectURL","raw","beforeLogoUpload","isImage","type","startsWith","handleSubmit","patch","success","goBack","back","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","class","header","_withCtx","_createElementVNode","_hoisted_2","_component_el_button","onClick","_cache","_component_el_form","model","label-width","onSubmit","_withModifiers","_component_el_form_item","label","prop","_component_el_input","$event","placeholder","clearable","rows","_component_el_input_number","min","precision","controls-position","_component_el_switch","active-text","inactive-text","inline-prompt","_component_el_upload","on-change","before-upload","show-file-list","auto-upload","src","_createBlock","_component_el_icon","_component_Plus","native-type","__exports__","defineBuiltInAccessor","forEach","count","configurable","append","$delete","entries","v","k","key","entry","dindex","found","entriesLength","passed","classof","Array","argument"],"mappings":"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","file":"js/shopManagement.4fa2b42e.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","<template>\r\n  <div class=\"shop-management-container\">\r\n    <el-card class=\"box-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>店铺管理</span>\r\n          <el-button @click=\"goBack\">返回</el-button>\r\n        </div>\r\n      </template>\r\n      <el-form\r\n        ref=\"formRef\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"120px\"\r\n        @submit.prevent=\"handleSubmit\"\r\n        class=\"shop-form\"\r\n      >\r\n        <el-form-item label=\"店铺名称\" prop=\"name\">\r\n          <el-input\r\n            v-model=\"form.name\"\r\n            placeholder=\"请输入店铺名称\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"宣传标语\" prop=\"slogan\">\r\n          <el-input\r\n            v-model=\"form.slogan\"\r\n            type=\"textarea\"\r\n            placeholder=\"例如: VIP尊享满89元减4元运费券\"\r\n            rows=\"3\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"运费(元)\" prop=\"expressPrice\">\r\n          <el-input-number\r\n            v-model=\"form.expressPrice\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"免运费门槛(元)\" prop=\"expressLimit\">\r\n          <el-input-number\r\n            v-model=\"form.expressLimit\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"店铺状态\" prop=\"state\">\r\n          <el-switch\r\n            v-model=\"form.state\"\r\n            active-text=\"开张\"\r\n            inactive-text=\"歇业\"\r\n            inline-prompt\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"店铺图片\" prop=\"img\">\r\n          <el-upload\r\n            :on-change=\"handleLogoChange\"\r\n            :before-upload=\"beforeLogoUpload\"\r\n            :show-file-list=\"false\"\r\n            :auto-upload=\"false\"\r\n            class=\"avatar-uploader\"\r\n          >\r\n            <img\r\n              v-if=\"form.img && typeof form.img === 'string'\"\r\n              :src=\"form.img\"\r\n              class=\"avatar\"\r\n            />\r\n            <img\r\n              v-if=\"form.rawImgFile && typeof form.rawImgFile === 'string'\"\r\n              :src=\"form.rawImgFile\"\r\n              class=\"avatar\"\r\n            />\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n          </el-upload>\r\n          <div class=\"el-upload__tip\">只能上传图片文件，建议尺寸1:1</div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" native-type=\"submit\" class=\"submit-button\"\r\n            >保存店铺修改</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from \"../../store/useUserStore\";\r\nimport { get, patch } from \"@/utils/request\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst router = useRouter();\r\n\r\nconst id = ref(\"\");\r\nconst form = ref({\r\n  name: \"\",\r\n  slogan: \"\",\r\n  expressPrice: 0,\r\n  expressLimit: 0,\r\n  state: true,\r\n  img: \"\",\r\n});\r\n\r\nconst rules = {\r\n  name: [{ required: true, message: \"请输入店铺名称\", trigger: \"blur\" }],\r\n  slogan: [{ required: true, message: \"请输入宣传标语\", trigger: \"blur\" }],\r\n  expressPrice: [{ required: true, message: \"请输入运费\", trigger: \"blur\" }],\r\n  expressLimit: [\r\n    { required: true, message: \"请输入免运费门槛\", trigger: \"blur\" },\r\n  ],\r\n  state: [{ required: true }],\r\n};\r\n\r\n// 加载店铺现有数据\r\nonMounted(async () => {\r\n  const userStore = useUserStore();\r\n  try {\r\n    const result = await get(`api/shop/info/${userStore.user.username}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      id.value = result.data.id;\r\n      form.value = {\r\n        ...form.value,\r\n        ...result.data,\r\n        img: result.data.imgUrl || \"\",\r\n        rawImgFile: null, // 初始化 rawImgFile 属性\r\n      };\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n});\r\n\r\nconst handleLogoChange = (file) => {\r\n  form.value.img = file;\r\n  form.value.rawImgFile = URL.createObjectURL(file.raw);\r\n};\r\n\r\nconst beforeLogoUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\n// 店铺表单提交\r\nconst handleSubmit = async () => {\r\n  try {\r\n    await patch(`/api/shop/${id.value}`, form.value, true);\r\n    ElMessage.success(\"店铺信息更新成功\");\r\n    router.push(\"/\");\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"店铺更新失败\");\r\n  }\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shop-management-container {\r\n  padding: 20px;\r\n  background-color: #f0f2f5;\r\n  min-height: calc(100vh - 40px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  border-radius: 10px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header .el-button {\r\n  margin-left: 20px;\r\n}\r\n\r\n.shop-form .el-form-item {\r\n  margin-bottom: 22px; /* 增加表单项间距 */\r\n}\r\n\r\n.submit-button {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .shop-management-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .box-card {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .card-header {\r\n    font-size: 18px;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .shop-form .el-form-item {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  .el-form-item__label {\r\n    width: 90px !important; /* 调整label宽度 */\r\n  }\r\n\r\n  .el-form-item__content {\r\n    margin-left: 90px !important; /* 调整内容左边距 */\r\n  }\r\n\r\n  .avatar-uploader .avatar,\r\n  .el-icon.avatar-uploader-icon {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"shop-management-container\">\r\n    <el-card class=\"box-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>店铺管理</span>\r\n          <el-button @click=\"goBack\">返回</el-button>\r\n        </div>\r\n      </template>\r\n      <el-form\r\n        ref=\"formRef\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"120px\"\r\n        @submit.prevent=\"handleSubmit\"\r\n        class=\"shop-form\"\r\n      >\r\n        <el-form-item label=\"店铺名称\" prop=\"name\">\r\n          <el-input\r\n            v-model=\"form.name\"\r\n            placeholder=\"请输入店铺名称\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"宣传标语\" prop=\"slogan\">\r\n          <el-input\r\n            v-model=\"form.slogan\"\r\n            type=\"textarea\"\r\n            placeholder=\"例如: VIP尊享满89元减4元运费券\"\r\n            rows=\"3\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"运费(元)\" prop=\"expressPrice\">\r\n          <el-input-number\r\n            v-model=\"form.expressPrice\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"免运费门槛(元)\" prop=\"expressLimit\">\r\n          <el-input-number\r\n            v-model=\"form.expressLimit\"\r\n            :min=\"0\"\r\n            :precision=\"2\"\r\n            controls-position=\"right\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"店铺状态\" prop=\"state\">\r\n          <el-switch\r\n            v-model=\"form.state\"\r\n            active-text=\"开张\"\r\n            inactive-text=\"歇业\"\r\n            inline-prompt\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"店铺图片\" prop=\"img\">\r\n          <el-upload\r\n            :on-change=\"handleLogoChange\"\r\n            :before-upload=\"beforeLogoUpload\"\r\n            :show-file-list=\"false\"\r\n            :auto-upload=\"false\"\r\n            class=\"avatar-uploader\"\r\n          >\r\n            <img\r\n              v-if=\"form.img && typeof form.img === 'string'\"\r\n              :src=\"form.img\"\r\n              class=\"avatar\"\r\n            />\r\n            <img\r\n              v-if=\"form.rawImgFile && typeof form.rawImgFile === 'string'\"\r\n              :src=\"form.rawImgFile\"\r\n              class=\"avatar\"\r\n            />\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n          </el-upload>\r\n          <div class=\"el-upload__tip\">只能上传图片文件，建议尺寸1:1</div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" native-type=\"submit\" class=\"submit-button\"\r\n            >保存店铺修改</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useUserStore } from \"../../store/useUserStore\";\r\nimport { get, patch } from \"@/utils/request\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst router = useRouter();\r\n\r\nconst id = ref(\"\");\r\nconst form = ref({\r\n  name: \"\",\r\n  slogan: \"\",\r\n  expressPrice: 0,\r\n  expressLimit: 0,\r\n  state: true,\r\n  img: \"\",\r\n});\r\n\r\nconst rules = {\r\n  name: [{ required: true, message: \"请输入店铺名称\", trigger: \"blur\" }],\r\n  slogan: [{ required: true, message: \"请输入宣传标语\", trigger: \"blur\" }],\r\n  expressPrice: [{ required: true, message: \"请输入运费\", trigger: \"blur\" }],\r\n  expressLimit: [\r\n    { required: true, message: \"请输入免运费门槛\", trigger: \"blur\" },\r\n  ],\r\n  state: [{ required: true }],\r\n};\r\n\r\n// 加载店铺现有数据\r\nonMounted(async () => {\r\n  const userStore = useUserStore();\r\n  try {\r\n    const result = await get(`api/shop/info/${userStore.user.username}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      id.value = result.data.id;\r\n      form.value = {\r\n        ...form.value,\r\n        ...result.data,\r\n        img: result.data.imgUrl || \"\",\r\n        rawImgFile: null, // 初始化 rawImgFile 属性\r\n      };\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n});\r\n\r\nconst handleLogoChange = (file) => {\r\n  form.value.img = file;\r\n  form.value.rawImgFile = URL.createObjectURL(file.raw);\r\n};\r\n\r\nconst beforeLogoUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\n// 店铺表单提交\r\nconst handleSubmit = async () => {\r\n  try {\r\n    await patch(`/api/shop/${id.value}`, form.value, true);\r\n    ElMessage.success(\"店铺信息更新成功\");\r\n    router.push(\"/\");\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"店铺更新失败\");\r\n  }\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shop-management-container {\r\n  padding: 20px;\r\n  background-color: #f0f2f5;\r\n  min-height: calc(100vh - 40px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  border-radius: 10px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header .el-button {\r\n  margin-left: 20px;\r\n}\r\n\r\n.shop-form .el-form-item {\r\n  margin-bottom: 22px; /* 增加表单项间距 */\r\n}\r\n\r\n.submit-button {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n  object-fit: cover;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .shop-management-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .box-card {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .card-header {\r\n    font-size: 18px;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .shop-form .el-form-item {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  .el-form-item__label {\r\n    width: 90px !important; /* 调整label宽度 */\r\n  }\r\n\r\n  .el-form-item__content {\r\n    margin-left: 90px !important; /* 调整内容左边距 */\r\n  }\r\n\r\n  .avatar-uploader .avatar,\r\n  .el-icon.avatar-uploader-icon {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./ShopManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ShopManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ShopManagement.vue?vue&type=style&index=0&id=2cc572c8&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\连泽基\\\\毕业设计\\\\仿京东电商全栈代码\\\\项目\\\\前端代码\\\\dianshang-fe-by-Dell\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2cc572c8\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ShopManagement.vue?vue&type=style&index=0&id=2cc572c8&scoped=true&lang=css\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n"],"sourceRoot":""}