{"version":3,"sources":["webpack:///./src/views/shop/ProductEdit.vue?d30e","webpack:///./node_modules/core-js/modules/es.array.push.js","webpack:///./node_modules/core-js/modules/web.url-search-params.has.js","webpack:///./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js/internals/array-set-length.js","webpack:///./node_modules/core-js/modules/web.url-search-params.size.js","webpack:///./src/views/shop/ProductEdit.vue","webpack:///./src/views/shop/ProductEdit.vue?55d8","webpack:///./src/views/shop/ProductEdit.vue?d5d9","webpack:///./node_modules/core-js/modules/web.url-search-params.delete.js","webpack:///./node_modules/core-js/modules/es.iterator.filter.js","webpack:///./node_modules/core-js/internals/validate-arguments-length.js","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/core-js/modules/es.iterator.find.js"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","getAll","$has","has","params","undefined","name","$value","values","value","index","enumerable","unsafe","$TypeError","MAX_SAFE_INTEGER","module","exports","it","DESCRIPTORS","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","defineBuiltInAccessor","forEach","get","count","configurable","router","useRouter","route","useRoute","shopId","id","products","ref","customTabs","currentProductIndex","productRules","required","message","trigger","price","oldPrice","tabs","type","onMounted","async","fetchShopInfo","fetchProducts","result","errno","data","ElMessage","console","log","map","product","split","tab","foundTab","find","t","filter","Boolean","img","imgUrl","rawImgFile","nextTick","info","setTimeout","handleProductImgChange","file","URL","createObjectURL","raw","beforeProductImgUpload","isImage","startsWith","handleProductSubmit","productId","productToSubmit","Array","join","response","post","success","handleProductDelete","ElMessageBox","confirm","confirmButtonText","cancelButtonText","del","splice","handleCarouselChange","newIndex","goBack","back","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","onClick","_cache","_hoisted_3","_component_el_carousel","autoplay","indicator-position","arrow","onChange","_Fragment","_renderList","_createBlock","_component_el_carousel_item","key","_id","_component_el_form","model","rules","label-width","onSubmit","_withModifiers","_component_el_form_item","label","prop","_component_el_input","$event","placeholder","_component_el_input_number","min","precision","_component_el_checkbox_group","_component_el_checkbox","_component_el_upload","on-change","before-upload","show-file-list","auto-upload","class","src","_component_el_icon","_component_Plus","native-type","__exports__","append","$delete","entries","v","k","entry","dindex","found","entriesLength","aCallable","anObject","getIteratorDirect","createIteratorProxy","callWithSafeIterationClosing","IS_PURE","iteratorClose","iteratorHelperThrowsOnInvalidIterator","iteratorHelperWithoutClosingOnEarlyError","FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR","filterWithoutClosingOnEarlyError","IteratorProxy","done","iterator","predicate","next","counter","real","passed","classof","argument","iterate","findWithoutClosingOnEarlyError","record","stop","IS_RECORD","INTERRUPTED"],"mappings":"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","file":"js/productEdit.00530ef0.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ProductEdit.vue?vue&type=style&index=0&id=50e01d5f&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","<template>\r\n  <div class=\"product-edit\">\r\n    <div class=\"header-with-button\">\r\n      <h2>修改产品</h2>\r\n      <el-button @click=\"goBack\">返回</el-button>\r\n    </div>\r\n    <div class=\"product-carousel\">\r\n      <el-carousel\r\n        ref=\"carousel\"\r\n        :autoplay=\"false\"\r\n        indicator-position=\"none\"\r\n        arrow=\"always\"\r\n        @change=\"handleCarouselChange\"\r\n      >\r\n        <el-carousel-item\r\n          v-for=\"(product, index) in products\"\r\n          :key=\"product._id\"\r\n        >\r\n          <el-form\r\n            :model=\"product\"\r\n            :rules=\"productRules\"\r\n            label-width=\"120px\"\r\n            @submit.prevent=\"() => handleProductSubmit(product.id, index)\"\r\n          >\r\n            <el-form-item label=\"产品名称\" prop=\"name\">\r\n              <el-input v-model=\"product.name\" placeholder=\"请输入产品名称\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"价格\" prop=\"price\">\r\n              <el-input-number\r\n                v-model=\"product.price\"\r\n                :min=\"0\"\r\n                :precision=\"2\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"原价\" prop=\"oldPrice\">\r\n              <el-input-number\r\n                v-model=\"product.oldPrice\"\r\n                :min=\"0\"\r\n                :precision=\"2\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"产品标签\" prop=\"tabs\">\r\n              <el-checkbox-group v-model=\"product.tabs\">\r\n                <el-checkbox\r\n                  v-for=\"tab in customTabs\"\r\n                  :key=\"tab.name\"\r\n                  :label=\"tab.tab\"\r\n                  >{{ tab.name }}</el-checkbox\r\n                >\r\n              </el-checkbox-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"产品图片\" prop=\"img\">\r\n              <el-upload\r\n                :on-change=\"(file) => handleProductImgChange(file, index)\"\r\n                :before-upload=\"beforeProductImgUpload\"\r\n                :show-file-list=\"false\"\r\n                :auto-upload=\"false\"\r\n                class=\"avatar-uploader\"\r\n              >\r\n                <img\r\n                  v-if=\"product.img && typeof product.img === 'string'\"\r\n                  :src=\"product.img\"\r\n                  class=\"avatar\"\r\n                />\r\n                <img\r\n                  v-if=\"\r\n                    product.rawImgFile && typeof product.rawImgFile === 'string'\r\n                  \"\r\n                  :src=\"product.rawImgFile\"\r\n                  class=\"avatar\"\r\n                />\r\n                <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n              </el-upload>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" native-type=\"submit\"\r\n                >保存产品修改</el-button\r\n              >\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button\r\n                type=\"danger\"\r\n                @click=\"handleProductDelete(product.id, index)\"\r\n                >删除产品</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, nextTick } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { get, post, del } from \"@/utils/request\"; // Assuming 'post' is used for updates\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst router = useRouter();\r\n\r\nconst route = useRoute();\r\nconst shopId = route.params.id;\r\n\r\nconst products = ref([]);\r\nconst customTabs = ref([]);\r\nconst currentProductIndex = ref(0);\r\n\r\nconst productRules = {\r\n  name: [{ required: true, message: \"请输入产品名称\", trigger: \"blur\" }],\r\n  price: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\r\n  oldPrice: [{ required: true, message: \"请输入原价\", trigger: \"blur\" }],\r\n  tabs: [\r\n    {\r\n      type: \"array\",\r\n      required: true,\r\n      message: \"请选择产品标签\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  // img: [{ required: true, message: \"请上传产品图片\", trigger: \"change\" }],\r\n};\r\n\r\nonMounted(async () => {\r\n  await fetchShopInfo();\r\n  await fetchProducts();\r\n});\r\n\r\nconst fetchShopInfo = async () => {\r\n  try {\r\n    const result = await get(`api/shop/${shopId}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      customTabs.value = result.data.tabs;\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n};\r\n\r\nconst fetchProducts = async () => {\r\n  try {\r\n    const result = await get(`api/shop/${shopId}/products`);\r\n    if (result?.errno === 0 && result?.data.length > 0) {\r\n      console.log(result.data);\r\n      products.value = result.data.map((product) => {\r\n        product.tabs = product.tabs\r\n          .split(\",\")\r\n          .map((tab) => {\r\n            const foundTab = customTabs.value.find((t) => t.tab === tab);\r\n            if (foundTab) {\r\n              return tab; // 只返回 tab 字符串\r\n            }\r\n            return null;\r\n          })\r\n          .filter(Boolean);\r\n        return {\r\n          ...product,\r\n          img: product.imgUrl || \"\",\r\n          rawImgFile: null, // 初始化 rawImgFile 属性\r\n        };\r\n      });\r\n      console.log(products.value);\r\n\r\n      await nextTick(); // Ensure forms are rendered before accessing them\r\n    } else {\r\n      ElMessage.info(\"该店铺暂无产品，即将返回店铺管理页面\");\r\n      setTimeout(() => {\r\n        router.push(`/shop/edit`);\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取产品列表失败\");\r\n  }\r\n};\r\n\r\nconst handleProductImgChange = (file, index) => {\r\n  products.value[index].rawImgFile = URL.createObjectURL(file.raw);\r\n  products.value[index].img = file;\r\n};\r\n\r\nconst beforeProductImgUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\nconst handleProductSubmit = async (productId, index) => {\r\n  console.log(index);\r\n  try {\r\n    const productToSubmit = { ...products.value[index] };\r\n\r\n    // 将 tabs 数组转换为逗号分隔的字符串\r\n    if (Array.isArray(productToSubmit.tabs)) {\r\n      productToSubmit.tabs = productToSubmit.tabs.join(\",\");\r\n    }\r\n\r\n    console.log(productToSubmit);\r\n\r\n    const response = await post(\r\n      `/api/shop/${shopId}/product/${productId}`,\r\n      productToSubmit,\r\n      true\r\n    );\r\n\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品信息更新成功\");\r\n    } else {\r\n      ElMessage.error(\"产品更新失败: \" + response.message);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    ElMessage.error(error.message || \"产品更新失败\");\r\n  }\r\n};\r\n\r\nconst handleProductDelete = async (productId, index) => {\r\n  try {\r\n    await ElMessageBox.confirm(\"确定要删除该产品吗？\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\",\r\n    });\r\n\r\n    const response = await del(`/api/shop/${shopId}/product/${productId}`);\r\n\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品删除成功\");\r\n      products.value.splice(index, 1); // 从数组中移除产品\r\n      if (products.value.length === 0) {\r\n        // 如果所有产品都删除了，可以跳转回店铺管理页面或者显示空状态\r\n        ElMessage.info(\"该店铺已无产品，即将返回店铺管理页面\");\r\n        setTimeout(() => {\r\n          router.push(`/shop/edit`);\r\n        }, 1500);\r\n      } else if (index === products.value.length) {\r\n        // 如果删除的是最后一个，将轮播图索引调整到前一个\r\n        currentProductIndex.value = products.value.length - 1;\r\n      }\r\n    } else {\r\n      ElMessage.error(\"产品删除失败: \" + response.message);\r\n    }\r\n  } catch (error) {\r\n    if (error !== \"cancel\") {\r\n      // 避免用户取消操作时报错\r\n      ElMessage.error(error.message || \"产品删除失败\");\r\n    }\r\n  }\r\n};\r\n\r\nconst handleCarouselChange = (newIndex) => {\r\n  currentProductIndex.value = newIndex;\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.product-edit {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.header-with-button {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header-with-button h2 {\r\n  margin: 0;\r\n}\r\n\r\n.product-carousel {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-carousel__item {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start; /* Align forms to the top */\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  /* 移除 min-height 和 overflow-y，让内容自然撑开 */\r\n}\r\n\r\n.product-image-preview {\r\n  margin-top: 10px;\r\n  border: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n  display: block;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden; /* 确保内容不会溢出 */\r\n  transition: var(--el-transition-duration-fast);\r\n  display: flex; /* 使用flex布局 */\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 60px;\r\n  height: 60px;\r\n  text-align: center;\r\n  line-height: 60px; /* 垂直居中图标 */\r\n}\r\n\r\n.el-form-item__content {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap; /* 允许内容换行 */\r\n}\r\n\r\n/* 覆盖el-carousel内部容器的默认高度 */\r\n:deep(.el-carousel__container) {\r\n  height: 600px !important; /* 强制高度自适应，使用深度选择器 */\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"product-edit\">\r\n    <div class=\"header-with-button\">\r\n      <h2>修改产品</h2>\r\n      <el-button @click=\"goBack\">返回</el-button>\r\n    </div>\r\n    <div class=\"product-carousel\">\r\n      <el-carousel\r\n        ref=\"carousel\"\r\n        :autoplay=\"false\"\r\n        indicator-position=\"none\"\r\n        arrow=\"always\"\r\n        @change=\"handleCarouselChange\"\r\n      >\r\n        <el-carousel-item\r\n          v-for=\"(product, index) in products\"\r\n          :key=\"product._id\"\r\n        >\r\n          <el-form\r\n            :model=\"product\"\r\n            :rules=\"productRules\"\r\n            label-width=\"120px\"\r\n            @submit.prevent=\"() => handleProductSubmit(product.id, index)\"\r\n          >\r\n            <el-form-item label=\"产品名称\" prop=\"name\">\r\n              <el-input v-model=\"product.name\" placeholder=\"请输入产品名称\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"价格\" prop=\"price\">\r\n              <el-input-number\r\n                v-model=\"product.price\"\r\n                :min=\"0\"\r\n                :precision=\"2\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"原价\" prop=\"oldPrice\">\r\n              <el-input-number\r\n                v-model=\"product.oldPrice\"\r\n                :min=\"0\"\r\n                :precision=\"2\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"产品标签\" prop=\"tabs\">\r\n              <el-checkbox-group v-model=\"product.tabs\">\r\n                <el-checkbox\r\n                  v-for=\"tab in customTabs\"\r\n                  :key=\"tab.name\"\r\n                  :label=\"tab.tab\"\r\n                  >{{ tab.name }}</el-checkbox\r\n                >\r\n              </el-checkbox-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"产品图片\" prop=\"img\">\r\n              <el-upload\r\n                :on-change=\"(file) => handleProductImgChange(file, index)\"\r\n                :before-upload=\"beforeProductImgUpload\"\r\n                :show-file-list=\"false\"\r\n                :auto-upload=\"false\"\r\n                class=\"avatar-uploader\"\r\n              >\r\n                <img\r\n                  v-if=\"product.img && typeof product.img === 'string'\"\r\n                  :src=\"product.img\"\r\n                  class=\"avatar\"\r\n                />\r\n                <img\r\n                  v-if=\"\r\n                    product.rawImgFile && typeof product.rawImgFile === 'string'\r\n                  \"\r\n                  :src=\"product.rawImgFile\"\r\n                  class=\"avatar\"\r\n                />\r\n                <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n              </el-upload>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" native-type=\"submit\"\r\n                >保存产品修改</el-button\r\n              >\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button\r\n                type=\"danger\"\r\n                @click=\"handleProductDelete(product.id, index)\"\r\n                >删除产品</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, nextTick } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { get, post, del } from \"@/utils/request\"; // Assuming 'post' is used for updates\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst router = useRouter();\r\n\r\nconst route = useRoute();\r\nconst shopId = route.params.id;\r\n\r\nconst products = ref([]);\r\nconst customTabs = ref([]);\r\nconst currentProductIndex = ref(0);\r\n\r\nconst productRules = {\r\n  name: [{ required: true, message: \"请输入产品名称\", trigger: \"blur\" }],\r\n  price: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\r\n  oldPrice: [{ required: true, message: \"请输入原价\", trigger: \"blur\" }],\r\n  tabs: [\r\n    {\r\n      type: \"array\",\r\n      required: true,\r\n      message: \"请选择产品标签\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  // img: [{ required: true, message: \"请上传产品图片\", trigger: \"change\" }],\r\n};\r\n\r\nonMounted(async () => {\r\n  await fetchShopInfo();\r\n  await fetchProducts();\r\n});\r\n\r\nconst fetchShopInfo = async () => {\r\n  try {\r\n    const result = await get(`api/shop/${shopId}`);\r\n    if (result?.errno === 0 && result?.data) {\r\n      customTabs.value = result.data.tabs;\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取店铺信息失败\");\r\n  }\r\n};\r\n\r\nconst fetchProducts = async () => {\r\n  try {\r\n    const result = await get(`api/shop/${shopId}/products`);\r\n    if (result?.errno === 0 && result?.data.length > 0) {\r\n      console.log(result.data);\r\n      products.value = result.data.map((product) => {\r\n        product.tabs = product.tabs\r\n          .split(\",\")\r\n          .map((tab) => {\r\n            const foundTab = customTabs.value.find((t) => t.tab === tab);\r\n            if (foundTab) {\r\n              return tab; // 只返回 tab 字符串\r\n            }\r\n            return null;\r\n          })\r\n          .filter(Boolean);\r\n        return {\r\n          ...product,\r\n          img: product.imgUrl || \"\",\r\n          rawImgFile: null, // 初始化 rawImgFile 属性\r\n        };\r\n      });\r\n      console.log(products.value);\r\n\r\n      await nextTick(); // Ensure forms are rendered before accessing them\r\n    } else {\r\n      ElMessage.info(\"该店铺暂无产品，即将返回店铺管理页面\");\r\n      setTimeout(() => {\r\n        router.push(`/shop/edit`);\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(error.message || \"获取产品列表失败\");\r\n  }\r\n};\r\n\r\nconst handleProductImgChange = (file, index) => {\r\n  products.value[index].rawImgFile = URL.createObjectURL(file.raw);\r\n  products.value[index].img = file;\r\n};\r\n\r\nconst beforeProductImgUpload = (file) => {\r\n  const isImage = file.type.startsWith(\"image/\");\r\n  if (!isImage) {\r\n    ElMessage.error(\"只能上传图片文件!\");\r\n  }\r\n  return isImage;\r\n};\r\n\r\nconst handleProductSubmit = async (productId, index) => {\r\n  console.log(index);\r\n  try {\r\n    const productToSubmit = { ...products.value[index] };\r\n\r\n    // 将 tabs 数组转换为逗号分隔的字符串\r\n    if (Array.isArray(productToSubmit.tabs)) {\r\n      productToSubmit.tabs = productToSubmit.tabs.join(\",\");\r\n    }\r\n\r\n    console.log(productToSubmit);\r\n\r\n    const response = await post(\r\n      `/api/shop/${shopId}/product/${productId}`,\r\n      productToSubmit,\r\n      true\r\n    );\r\n\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品信息更新成功\");\r\n    } else {\r\n      ElMessage.error(\"产品更新失败: \" + response.message);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    ElMessage.error(error.message || \"产品更新失败\");\r\n  }\r\n};\r\n\r\nconst handleProductDelete = async (productId, index) => {\r\n  try {\r\n    await ElMessageBox.confirm(\"确定要删除该产品吗？\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\",\r\n    });\r\n\r\n    const response = await del(`/api/shop/${shopId}/product/${productId}`);\r\n\r\n    if (response.errno === 0) {\r\n      ElMessage.success(\"产品删除成功\");\r\n      products.value.splice(index, 1); // 从数组中移除产品\r\n      if (products.value.length === 0) {\r\n        // 如果所有产品都删除了，可以跳转回店铺管理页面或者显示空状态\r\n        ElMessage.info(\"该店铺已无产品，即将返回店铺管理页面\");\r\n        setTimeout(() => {\r\n          router.push(`/shop/edit`);\r\n        }, 1500);\r\n      } else if (index === products.value.length) {\r\n        // 如果删除的是最后一个，将轮播图索引调整到前一个\r\n        currentProductIndex.value = products.value.length - 1;\r\n      }\r\n    } else {\r\n      ElMessage.error(\"产品删除失败: \" + response.message);\r\n    }\r\n  } catch (error) {\r\n    if (error !== \"cancel\") {\r\n      // 避免用户取消操作时报错\r\n      ElMessage.error(error.message || \"产品删除失败\");\r\n    }\r\n  }\r\n};\r\n\r\nconst handleCarouselChange = (newIndex) => {\r\n  currentProductIndex.value = newIndex;\r\n};\r\n\r\nconst goBack = () => {\r\n  router.back();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.product-edit {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.header-with-button {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header-with-button h2 {\r\n  margin: 0;\r\n}\r\n\r\n.product-carousel {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-carousel__item {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start; /* Align forms to the top */\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  /* 移除 min-height 和 overflow-y，让内容自然撑开 */\r\n}\r\n\r\n.product-image-preview {\r\n  margin-top: 10px;\r\n  border: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 图片上传样式 */\r\n.avatar-uploader .avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n  display: block;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden; /* 确保内容不会溢出 */\r\n  transition: var(--el-transition-duration-fast);\r\n  display: flex; /* 使用flex布局 */\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 60px;\r\n  height: 60px;\r\n  text-align: center;\r\n  line-height: 60px; /* 垂直居中图标 */\r\n}\r\n\r\n.el-form-item__content {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap; /* 允许内容换行 */\r\n}\r\n\r\n/* 覆盖el-carousel内部容器的默认高度 */\r\n:deep(.el-carousel__container) {\r\n  height: 600px !important; /* 强制高度自适应，使用深度选择器 */\r\n}\r\n</style>\r\n","import script from \"./ProductEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProductEdit.vue?vue&type=style&index=0&id=50e01d5f&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\连泽基\\\\毕业设计\\\\仿京东电商全栈代码\\\\项目\\\\前端代码\\\\dianshang-fe-by-Dell\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50e01d5f\"]])\n\nexport default __exports__","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('filter', function () { /* empty */ });\nvar filterWithoutClosingOnEarlyError = !IS_PURE && !FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar FORCED = IS_PURE || FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR || filterWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n"],"sourceRoot":""}