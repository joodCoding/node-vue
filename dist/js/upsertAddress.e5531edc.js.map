{"version":3,"sources":["webpack:///./src/effects/addressEffect.js","webpack:///./src/views/upsertAddress/UpsertAddress.vue","webpack:///./src/views/upsertAddress/UpsertAddress.vue?c77a","webpack:///./src/views/upsertAddress/UpsertAddress.vue?96e1"],"names":["useCommonAddressEffect","userStore","useUserStore","getAddressList","async","addressList","forceUpdate","length","_result$data","result","get","console","log","data","changeAddressList","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$setup","handleBackClick","_hoisted_3","_toDisplayString","addressId","upsertAddress","_hoisted_4","_hoisted_5","placeholder","formData","city","$event","_hoisted_6","department","_hoisted_7","houseNumber","_hoisted_8","name","_hoisted_9","phone","useAddressEffect","toRefs","useFormEffect","router","useRouter","reactive","getAddressItem","errno","patch","back","post","setup","_route$params","route","useRoute","params","id","__exports__","render"],"mappings":"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","file":"js/upsertAddress.e5531edc.js","sourcesContent":["import { useUserStore } from \"@/store/useUserStore\";\nimport { get } from \"../utils/request\";\n\nconst useCommonAddressEffect = () => {\n  const userStore = useUserStore();\n\n  const getAddressList = async (forceUpdate) => {\n    const addressList = userStore.addressList;\n    if (forceUpdate || !addressList.length) {\n      const result = await get(\"/api/user/address\");\n      console.log(result);\n      if (result?.data?.length) {\n        userStore.changeAddressList(result.data);\n      }\n    }\n  };\n\n  return { getAddressList };\n};\n\nexport default useCommonAddressEffect;\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">\n      <div class=\"iconfont title__back\" @click=\"handleBackClick\">&#xe6f2;</div>\n      <div class=\"title__text\">\n        {{ addressId ? \"编辑收货地址\" : \"新建收货地址\" }}\n      </div>\n      <div class=\"title__save\" @click=\"upsertAddress\">保存</div>\n    </div>\n    <div class=\"form\">\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">所在城市:</div>\n        <input\n          class=\"form__item__content\"\n          placeholder=\"如北京市\"\n          v-model=\"formData.city\"\n        />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">小区/大厦/学校:</div>\n        <input\n          class=\"form__item__content\"\n          placeholder=\"如理工大学国防科技园\"\n          v-model=\"formData.department\"\n        />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">楼号-门牌号:</div>\n        <input\n          class=\"form__item__content\"\n          placeholder=\"A号楼B层\"\n          v-model=\"formData.houseNumber\"\n        />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">收货人:</div>\n        <input\n          class=\"form__item__content\"\n          placeholder=\"请填写收货人的姓名\"\n          v-model=\"formData.name\"\n        />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">联系电话:</div>\n        <input\n          class=\"form__item__content\"\n          placeholder=\"请填写收货手机号\"\n          v-model=\"formData.phone\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { toRefs, reactive } from \"vue\";\nimport { useUserStore } from \"../../store/useUserStore\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { post, get, patch } from \"../../utils/request\";\nimport useCommonAddressEffect from \"../../effects/addressEffect\";\n\nconst useAddressEffect = () => {\n  const userStore = useUserStore();\n  const addressList = toRefs(userStore.addressList);\n  const { getAddressList } = useCommonAddressEffect();\n  getAddressList();\n  return { addressList };\n};\n\nconst useFormEffect = addressId => {\n  const router = useRouter();\n  const formData = reactive({\n    city: \"\",\n    department: \"\",\n    houseNumber: \"\",\n    name: \"\",\n    phone: \"\"\n  });\n  const getAddressItem = async () => {\n    const result = await get(`/api/user/address/${addressId}`);\n    if (result?.errno === 0 && result?.data) {\n      const { city, department, houseNumber, name, phone } = result.data;\n      formData.city = city;\n      formData.department = department;\n      formData.houseNumber = houseNumber;\n      formData.name = name;\n      formData.phone = phone;\n    }\n  };\n  const upsertAddress = async () => {\n    if (addressId) {\n      const result = await patch(`/api/user/address/${addressId}`, formData);\n      console.log(formData);\n      if (result?.errno === 0) {\n        router.back();\n      }\n    } else {\n      const result = await post(\"/api/user/address\", formData);\n      if (result?.errno === 0) {\n        router.back();\n      }\n    }\n  };\n  if (addressId) {\n    getAddressItem();\n  }\n  return { formData, upsertAddress };\n};\n\nexport default {\n  name: \"MyAddressList\",\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const addressId = route?.params?.id;\n    const { addressList } = useAddressEffect();\n    const { formData, upsertAddress } = useFormEffect(addressId);\n    const handleBackClick = () => {\n      router.back();\n    };\n    return { addressId, addressList, formData, handleBackClick, upsertAddress };\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  overflow-y: auto;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: $dark-bgColor;\n}\n.title {\n  display: flex;\n  line-height: 0.44rem;\n  background: $bgColor;\n  font-size: 0.16rem;\n  color: $content-fontcolor;\n  text-align: center;\n  &__back {\n    width: 0.2rem;\n    margin-left: 0.18rem;\n    font-size: 0.2rem;\n    color: $search-fontColor;\n  }\n  &__text {\n    flex: 1;\n    text-align: center;\n  }\n  &__save {\n    margin-right: 0.2rem;\n    font-size: 0.14rem;\n  }\n}\n.form {\n  padding: 0 0.2rem;\n  margin-top: 0.12rem;\n  background: $bgColor;\n  border-top: 0.01rem solid $content-bgColor;\n  border-bottom: 0.01rem solid $content-bgColor;\n  &__item {\n    display: flex;\n    padding: 0.12rem 0;\n    line-height: 0.2rem;\n    font-size: 0.14rem;\n    border-bottom: 0.01rem solid $content-bgColor;\n    &:last-of-type {\n      border-bottom: none;\n    }\n    &__label {\n      margin-right: 0.05rem;\n      color: $medium-fontColor;\n    }\n    &__content {\n      flex: 1;\n      border: none;\n      outline: none;\n      color: #3f3f3f;\n      &::placeholder {\n        color: #3f3f3f;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./UpsertAddress.vue?vue&type=template&id=4e5ca5aa&scoped=true\"\nimport script from \"./UpsertAddress.vue?vue&type=script&lang=js\"\nexport * from \"./UpsertAddress.vue?vue&type=script&lang=js\"\n\nimport \"./UpsertAddress.vue?vue&type=style&index=0&id=4e5ca5aa&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\连泽基\\\\毕业设计\\\\仿京东电商全栈代码\\\\项目\\\\前端代码\\\\dianshang-fe-by-Dell\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e5ca5aa\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UpsertAddress.vue?vue&type=style&index=0&id=4e5ca5aa&lang=scss&scoped=true\""],"sourceRoot":""}